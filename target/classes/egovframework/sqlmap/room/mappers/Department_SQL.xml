<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="egovframework.room.service.impl.DepartmentMapper">

    <resultMap id="department" type="departmentVO">
        <result property="departmentIdx" column="department_idx"/>
        <result property="name" column="name"/>
    </resultMap>
	
    <!-- 부서 등록 -->
    <insert id="insertDepartment" parameterType="departmentVO" useGeneratedKeys="true" keyProperty="departmentIdx">
        INSERT INTO department (name) VALUES (#{name})
    </insert>

    <!-- 부서 수정 -->
    <update id="updateDepartment" parameterType="departmentVO">
        UPDATE department SET
            name = #{name}
        WHERE department_idx = #{departmentIdx}
    </update>

    <!-- 부서 삭제 -->
    <delete id="deleteDepartment" parameterType="departmentVO">
        DELETE FROM department 
        WHERE department_idx = #{departmentIdx}
    </delete>

    <!-- 부서 상세 조회 -->
    <select id="selectDepartment" parameterType="departmentVO" resultMap="department">
        SELECT 
            department_idx,
            name
        FROM department
        WHERE department_idx = #{departmentIdx}
    </select>

    <!-- 부서 목록 조회 -->
    <select id="selectDepartmentList" parameterType="departmentVO" resultMap="department">
        SELECT 
            department_idx,
            name
        FROM department
        ORDER BY department_idx ASC
    </select>

    <!-- 부서 총 개수 조회 -->
    <select id="selectDepartmentListTotCnt" parameterType="departmentVO" resultType="int">
        SELECT COUNT(*) totcnt
        FROM department
    </select>

</mapper>